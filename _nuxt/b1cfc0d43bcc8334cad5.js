(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{155:function(t,e,n){"use strict";var o=n(3),r=n(17),c=n(23),f=n(104),d=n(58),l=n(11),h=n(37).f,y=n(59).f,v=n(9).f,m=n(158).trim,O=o.Number,w=O,j=O.prototype,x="Number"==c(n(71)(j)),_="trim"in String.prototype,P=function(t){var e=d(t,!1);if("string"==typeof e&&e.length>2){var n,o,r,c=(e=_?e.trim():m(e,3)).charCodeAt(0);if(43===c||45===c){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===c){switch(e.charCodeAt(1)){case 66:case 98:o=2,r=49;break;case 79:case 111:o=8,r=55;break;default:return+e}for(var code,f=e.slice(2),i=0,l=f.length;i<l;i++)if((code=f.charCodeAt(i))<48||code>r)return NaN;return parseInt(f,o)}}return+e};if(!O(" 0o1")||!O("0b1")||O("+0x1")){O=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof O&&(x?l((function(){j.valueOf.call(n)})):"Number"!=c(n))?f(new w(P(e)),n,O):P(e)};for(var R,D=n(8)?h(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;D.length>S;S++)r(w,R=D[S])&&!r(O,R)&&v(O,R,y(w,R));O.prototype=j,j.constructor=O,n(13)(o,"Number",O)}},156:function(t,e,n){"use strict";function o(){return(o=Object.assign||function(a){for(var b,t=1;t<arguments.length;t++)for(var e in b=arguments[t])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)}var r=["attrs","props","domProps"],c=["class","style","directives"],f=["on","nativeOn"],d=function(a,b){return function(){a&&a.apply(this,arguments),b&&b.apply(this,arguments)}};t.exports=function(a){return a.reduce((function(t,a){for(var b in a)if(t[b])if(-1!==r.indexOf(b))t[b]=o({},t[b],a[b]);else if(-1!==c.indexOf(b)){var e=t[b]instanceof Array?t[b]:[t[b]],n=a[b]instanceof Array?a[b]:[a[b]];t[b]=e.concat(n)}else if(-1!==f.indexOf(b))for(var l in a[b])if(t[b][l]){var g=t[b][l]instanceof Array?t[b][l]:[t[b][l]],h=a[b][l]instanceof Array?a[b][l]:[a[b][l]];t[b][l]=g.concat(h)}else t[b][l]=a[b][l];else if("hook"==b)for(var i in a[b])t[b][i]=t[b][i]?d(t[b][i],a[b][i]):a[b][i];else t[b]=a[b];else t[b]=a[b];return t}),{})}},157:function(t,e,n){var o=n(7),r=n(164)(!1);o(o.S,"Object",{values:function(t){return r(t)}})},158:function(t,e,n){var o=n(7),r=n(21),c=n(11),f=n(159),d="["+f+"]",l=RegExp("^"+d+d+"*"),h=RegExp(d+d+"*$"),y=function(t,e,n){var r={},d=c((function(){return!!f[t]()||"​"!="​"[t]()})),l=r[t]=d?e(v):f[t];n&&(r[n]=l),o(o.P+o.F*d,"String",r)},v=y.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(h,"")),t};t.exports=y},159:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},160:function(t,e,n){"use strict";var o=n(7),r=n(161)(6),c="findIndex",f=!0;c in[]&&Array(1)[c]((function(){f=!1})),o(o.P+o.F*f,"Array",{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(73)(c)},161:function(t,e,n){var o=n(27),r=n(72),c=n(28),f=n(24),d=n(162);t.exports=function(t,e){var n=1==t,l=2==t,h=3==t,y=4==t,v=6==t,m=5==t||v,O=e||d;return function(e,d,w){for(var j,x,_=c(e),P=r(_),R=o(d,w,3),D=f(P.length),S=0,B=n?O(e,D):l?O(e,0):void 0;D>S;S++)if((m||S in P)&&(x=R(j=P[S],S,_),t))if(n)B[S]=x;else if(x)switch(t){case 3:return!0;case 5:return j;case 6:return S;case 2:B.push(j)}else if(y)return!1;return v?-1:h||y?y:B}}},162:function(t,e,n){var o=n(163);t.exports=function(t,e){return new(o(t))(e)}},163:function(t,e,n){var o=n(12),r=n(103),c=n(2)("species");t.exports=function(t){var e;return r(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!r(e.prototype)||(e=void 0),o(e)&&null===(e=e[c])&&(e=void 0)),void 0===e?Array:e}},164:function(t,e,n){var o=n(8),r=n(22),c=n(18),f=n(36).f;t.exports=function(t){return function(e){for(var n,d=c(e),l=r(d),h=l.length,i=0,y=[];h>i;)n=l[i++],o&&!f.call(d,n)||y.push(t?[n,d[n]]:d[n]);return y}}},165:function(t,e,n){"use strict";n.r(e);n(155);var o,r,c=n(156),f=n.n(c),d=(n(160),n(74),n(75),n(14),n(10)),l=(n(102),n(57)),h=(o=function(t,b){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(t,b)},function(t,b){function e(){this.constructor=t}o(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e}(l.Vue),v=(n(20),n(157),function(){var t=function(e,b){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(e,b)};return function(e,b){function n(){this.constructor=e}t(e,b),e.prototype=null===b?Object.create(b):(n.prototype=b.prototype,new n)}}()),m=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},O=function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},w=null,j=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.objects={},e.box2d=w,e.world=w,e.canvas=w,e.context=w,e.canvasOffset={x:0,y:0},e.debugDraw=w,e.mouseJointGroundBody=w,e.frametime=0,e.frameTime60=0,e}return v(e,t),Object.defineProperty(e.prototype,"translate",{get:function(){return[this.canvasOffset.x+this.view.x,this.canvasOffset.y+this.view.y]},enumerable:!0,configurable:!0}),e.prototype.onMouseMove=function(t){},e.prototype.onMouseOut=function(t){},e.prototype.onMouseDown=function(t){},e.prototype.onMouseUp=function(t){},e.prototype.onKeyDown=function(t){},e.prototype.onKeyUp=function(t){},e.prototype.mounted=function(){this.box2d=Box2D,this.box2d&&this.init()},Object.defineProperty(e.prototype,"items",{get:function(){return Object.values(this.objects)},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.canvas=this.$refs.canvas,this.context=this.canvas.getContext("2d"),this.debugDraw=getCanvasDebugDraw(this.context),this.debugDraw.SetFlags(1),this.createWorld(),this.createScene(),this.resize()},e.prototype.resetScene=function(){this.createWorld(),this.items.forEach((function(i){return i._start()}))},e.prototype.createWorld=function(){null!=this.world&&this.box2d.destroy(this.world),this.world=new this.box2d.b2World(new this.box2d.b2Vec2(0,-9.81)),this.world.SetDebugDraw(this.debugDraw),this.mouseJointGroundBody=this.world.CreateBody(new this.box2d.b2BodyDef)},e.prototype.createScene=function(){},e.prototype.register=function(t){var e=t._uid;void 0===this.objects[e]&&(t._start(),this.$set(this.objects,e,t))},e.prototype.unregister=function(t){var e=t._uid;void 0!==this.objects[e]&&(t._end(),this.$delete(this.objects,e))},e.prototype.resize=function(){this.canvas.width=this.width,this.canvas.height=this.height,this.canvasOffset.x=this.canvas.width/2,this.canvasOffset.y=this.canvas.height/2},e.prototype.draw=function(){this.context.fillStyle="#191e38",this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.context.save(),this.context.translate(this.translate[0],this.translate[1]),this.context.scale(1,-1),this.context.scale(this.zoom,this.zoom),this.context.lineWidth/=this.zoom,drawAxes(this.context),this.context.fillStyle="rgb(255,255,0)",this.world.DrawDebugData(),this.context.restore()},e.prototype.step=function(dt){this.world.Step(dt/1e3,3,2),this.frametime=dt,this.frameTime60=this.frameTime60*(59/60)+this.frametime*(1/60)},e.prototype.update=function(dt){this.step(dt),this.draw(),this.items.forEach((function(i){return i.update(dt)}))},e.prototype.render=function(t){return t("div",f()([{},this.$bem()]),[t("canvas",f()([{ref:"canvas",attrs:{width:"800",height:"650"}},this.$bem("canvas")])),this.$slots.default])},m([Object(l.Prop)({required:!0}),O("design:type",Number)],e.prototype,"width",void 0),m([Object(l.Prop)({required:!0}),O("design:type",Number)],e.prototype,"height",void 0),m([Object(l.Prop)({default:function(){return{x:0,y:0}}}),O("design:type",Object)],e.prototype,"view",void 0),m([Object(l.Prop)({required:!0}),O("design:type",Number)],e.prototype,"zoom",void 0),m([Object(l.Prop)({default:!1}),O("design:type",Boolean)],e.prototype,"pause",void 0),m([Object(l.Prop)({default:!1}),O("design:type",Boolean)],e.prototype,"nodraw",void 0),m([Object(l.Watch)("width"),Object(l.Watch)("height"),O("design:type",Function),O("design:paramtypes",[]),O("design:returntype",void 0)],e.prototype,"resize",null),e=m([Object(l.Component)({name:"e-engine"})],e)}(y),x=function(){var t=function(e,b){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(e,b)};return function(e,b){function n(){this.constructor=e}t(e,b),e.prototype=null===b?Object.create(b):(n.prototype=b.prototype,new n)}}(),_=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},P=function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.engine=null,e}return x(e,t),Object.defineProperty(e.prototype,"angle",{get:function(){return.017453292519943295*this.r},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return{x:this.x,y:this.y}},enumerable:!0,configurable:!0}),e.prototype.findParent=function(t){return t.world?t:t.$parent?this.findParent(t.$parent):null},e.prototype.mounted=function(){var t=this;this.$nextTick((function(){t.engine=t.findParent(t.$parent),t.engine&&t.engine.register(t),t.$emit("enable",t)}))},e.prototype.beforeDestroy=function(){this.engine&&this.engine.unregister(this),this.$emit("disable",this)},e.prototype.render=function(t){return t("span")},e.prototype.end=function(){},e.prototype._end=function(){this.$emit("disable",this),this.end()},e.prototype.start=function(){},e.prototype._start=function(){this.$emit("enable",this),this.start()},e.prototype.update=function(dt){},_([Object(l.Prop)({default:0}),P("design:type",Number)],e.prototype,"r",void 0),_([Object(l.Prop)({default:0}),P("design:type",Number)],e.prototype,"x",void 0),_([Object(l.Prop)({default:0}),P("design:type",Number)],e.prototype,"y",void 0),e=_([Object(l.Component)({name:"e-object"})],e)}(y),D=function(){var t=function(e,b){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(e,b)};return function(e,b){function n(){this.constructor=e}t(e,b),e.prototype=null===b?Object.create(b):(n.prototype=b.prototype,new n)}}(),S=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},B=function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};!function(t){t[t.Enter=0]="Enter",t[t.Stay=1]="Stay",t[t.Exit=2]="Exit"}(r||(r={}));var N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.body=null,e.shape=null,e.collisions={},e}return D(e,t),e.prototype.on_awake=function(){this.updateFixture()},Object.defineProperty(e.prototype,"position",{get:function(){var t=this.body.GetPosition();return{x:t.x,y:t.y}},enumerable:!0,configurable:!0}),e.prototype.buildBody=function(t){return null},e.prototype.buildShape=function(t){return null},e.prototype.start=function(){if(this.engine){var t=this.shape=this.buildShape(this.engine);(this.body=this.buildBody(this.engine))&&t&&(this.updateFixture(),this.initialVelocity&&this.body.SetLinearVelocity(new Box2D.b2Vec2(this.initialVelocity.x,this.initialVelocity)),this.body.SetTransform(new Box2D.b2Vec2(this.x,this.y),this.angle))}},e.prototype.updateFixture=function(){this.body.CreateFixture(this.shape,this.density),this.body.SetLinearDamping(this.linearDamping),this.body.SetAngularDamping(this.angularDamping),this.body.SetAwake(+this.awake),this.body.SetActive(+this.active)},e.prototype.update=function(dt){if(this.listen){var t=this.body.GetContactList(),e=JSON.parse(JSON.stringify(this.collisions));for(Object.values(e).forEach((function(s){return s.status=r.Exit}));t.ptr>0;){var body=t.get_other();void 0===e[n=body.ptr]?e[n]={body:body,status:r.Enter}:e[n].status=r.Stay,t=t.get_next()}for(var n in e)e[n].status===r.Exit?(this.$emit("collisionExit",e[n].body),delete e[n]):e[n].status===r.Enter&&this.$emit("collisionEnter",e[n].body);this.collisions=e}},e.prototype.end=function(){this.engine.world.DestroyBody(this.body)},S([Object(l.Prop)({default:!1}),B("design:type",Boolean)],e.prototype,"listen",void 0),S([Object(l.Prop)({default:!0}),B("design:type",Boolean)],e.prototype,"awake",void 0),S([Object(l.Prop)({default:!0}),B("design:type",Boolean)],e.prototype,"active",void 0),S([Object(l.Prop)({default:!1}),B("design:type",Object)],e.prototype,"initialVelocity",void 0),S([Object(l.Prop)({default:.1}),B("design:type",Number)],e.prototype,"linearDamping",void 0),S([Object(l.Prop)({default:.1}),B("design:type",Number)],e.prototype,"angularDamping",void 0),S([Object(l.Prop)({default:1}),B("design:type",Number)],e.prototype,"density",void 0),S([Object(l.Prop)({default:!1}),B("design:type",Object)],e.prototype,"onCollisionExit",void 0),S([Object(l.Prop)({default:!1}),B("design:type",Object)],e.prototype,"onCollisionEnter",void 0),S([Object(l.Prop)({default:!1}),B("design:type",Object)],e.prototype,"onCollisionStay",void 0),S([Object(l.Watch)("awake"),Object(l.Watch)("active"),Object(l.Watch)("linearDamping"),Object(l.Watch)("angularDamping"),Object(l.Watch)("density"),B("design:type",Function),B("design:paramtypes",[]),B("design:returntype",void 0)],e.prototype,"updateFixture",null),e=S([Object(l.Component)({name:"e-PhysicObject"})],e)}(R),A=function(){var t=function(e,b){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(e,b)};return function(e,b){function n(){this.constructor=e}t(e,b),e.prototype=null===b?Object.create(b):(n.prototype=b.prototype,new n)}}(),E=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},C=function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},z=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.body=null,e.shape=null,e}return A(e,t),e.prototype.buildBody=function(){var t=new Box2D.b2BodyDef;return t.set_type(this.engine.box2d.b2_dynamicBody),this.engine.world.CreateBody(t)},e.prototype.buildShape=function(){return this.shape=new Box2D.b2PolygonShape,this.shape.SetAsBox(this.width,this.height),this.shape},E([Object(l.Prop)({default:15}),C("design:type",Number)],e.prototype,"width",void 0),E([Object(l.Prop)({default:.5}),C("design:type",Number)],e.prototype,"height",void 0),e=E([Object(l.Component)({name:"e-handle"})],e)}(N),$=function(){var t=function(e,b){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(e,b)};return function(e,b){function n(){this.constructor=e}t(e,b),e.prototype=null===b?Object.create(b):(n.prototype=b.prototype,new n)}}(),F=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},k=function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $(e,t),Object.defineProperty(e.prototype,"isBox",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return Math.sqrt(this.weight*this.scale)},enumerable:!0,configurable:!0}),e.prototype.buildBody=function(t){var e=new Box2D.b2BodyDef;return e.set_type(t.box2d.b2_dynamicBody),t.world.CreateBody(e)},e.prototype.buildShape=function(t){var e=new Box2D.b2PolygonShape;return e.SetAsBox(this.size,this.size),e},F([Object(l.Prop)({default:10}),k("design:type",Number)],e.prototype,"weight",void 0),F([Object(l.Prop)({default:.5}),k("design:type",Number)],e.prototype,"scale",void 0),e=F([Object(l.Component)({name:"e-Box"})],e)}(N),V=function(){var t=function(e,b){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(e,b)};return function(e,b){function n(){this.constructor=e}t(e,b),e.prototype=null===b?Object.create(b):(n.prototype=b.prototype,new n)}}(),M=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},L=function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return V(e,t),e.prototype.buildShape=function(){return createTrianglePolygonShape(2)},e.prototype.buildBody=function(){var t=new Box2D.b2BodyDef;return t.set_type(this.engine.box2d.b2_dynamicBody),t.set_position(new Box2D.b2Vec2(0,0)),this.engine.world.CreateBody(t)},e.prototype.update=function(dt){0!==this.move&&this.body.SetLinearVelocity(new Box2D.b2Vec2(this.move*this.speed,0))},M([Object(l.Prop)({required:!0}),L("design:type",Number)],e.prototype,"move",void 0),M([Object(l.Prop)({default:10}),L("design:type",Number)],e.prototype,"speed",void 0),e=M([Object(l.Component)({name:"e-Player"})],e)}(N),W=function(){var t=function(e,b){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(e,b)};return function(e,b){function n(){this.constructor=e}t(e,b),e.prototype=null===b?Object.create(b):(n.prototype=b.prototype,new n)}}(),G=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},J=function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},H=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.body=null,e.shape=null,e}return W(e,t),e.prototype.buildShape=function(t){var e=new Box2D.b2EdgeShape;return e.Set(new Box2D.b2Vec2(-this.width,0),new Box2D.b2Vec2(this.width,0)),e},e.prototype.buildBody=function(t){var e=new Box2D.b2BodyDef;return t.world.CreateBody(e)},G([Object(l.Prop)({default:50}),J("design:type",Number)],e.prototype,"width",void 0),e=G([Object(l.Component)({name:"e-Floor"})],e)}(N);n.d(e,"Scoreboard",(function(){return nt}));var U,K=function(){var t=function(e,b){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])})(e,b)};return function(e,b){function n(){this.constructor=e}t(e,b),e.prototype=null===b?Object.create(b):(n.prototype=b.prototype,new n)}}(),X=function(){return(X=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},Y=function(t,e,n,desc){var o,r=arguments.length,c=r<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c},Q=function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Z=function(){for(var s=0,i=0,t=arguments.length;i<t;i++)s+=arguments[i].length;var e=Array(s),n=0;for(i=0;i<t;i++)for(var a=arguments[i],o=0,r=a.length;o<r;o++,n++)e[n]=a[o];return e},tt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};!function(t){t[t.Space=32]="Space",t[t.Left=37]="Left",t[t.Right=39]="Right"}(U||(U={}));var et=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.worldSize={x:0,y:0},e.boxes=[],e.current=Date.now(),e.score=0,e.highscore=0,e.next=0,e.left=0,e.right=0,e.clear=!1,e.handleBody=null,e}return K(e,t),e.prototype.handleFloorContact=function(body){body.ptr===this.handleBody.ptr&&this.end();for(var t=0;t<this.boxes.length;t++){var e=this.boxes[t];void 0!==e.go&&void 0!==e.go.body&&e.go.body.ptr===body.ptr&&(console.log(e,e.go.body.ptr,body.ptr),this.boxes.splice(t,1),t--)}},Object.defineProperty(e.prototype,"move",{get:function(){return-this.left+this.right},enumerable:!0,configurable:!0}),e.prototype.mounted=function(){window.addEventListener("keydown",this.onPress.bind(this)),window.addEventListener("keyup",this.onRelease.bind(this)),this.resize(),window.addEventListener("resize",this.resize.bind(this)),this.update()},e.prototype.update=function(){var dt=Math.min(1e3/60,Date.now()-this.current);this.score+=dt,this.current=Date.now(),this.$refs.engine.update(dt),this.next<=0&&(this.boxes.push({id:Math.random().toString(32).substr(2),x:16*(1-2*Math.random()),y:15+10*Math.random(),w:1+~~(10*Math.random())}),this.next=1500+500*Math.random()),this.next-=dt,tt(this.update.bind(this))},e.prototype.resize=function(){this.worldSize.x=document.documentElement.clientWidth,this.worldSize.y=document.documentElement.clientHeight},e.prototype.onRelease=function(t){switch(t.keyCode){case U.Left:this.left=0;break;case U.Right:this.right=0}},e.prototype.onPress=function(t){switch(t.keyCode){case U.Left:this.left=1;break;case U.Right:this.right=1}},e.prototype.end=function(){var t=this;this.highscore<this.score&&(this.highscore=this.score),this.score=0;this.$refs.engine;this.boxes.splice(0,this.boxes.length),this.clear=!0,this.$nextTick((function(){return t.clear=!1}))},Object.defineProperty(e.prototype,"view",{get:function(){return{x:0,y:.4*this.worldSize.y}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoom",{get:function(){var t=this.worldSize.x/50,e=this.worldSize.y/35;return Math.min(t,e)},enumerable:!0,configurable:!0}),e.prototype.render=function(t){var e=this;return t("div",f()([{},this.$bem()]),[t(nt,f()([{},this.$bem("scoreboard"),{attrs:{score:this.score,highscore:this.highscore}}])),t(j,{attrs:{width:this.worldSize.x,height:this.worldSize.y,zoom:this.zoom,view:this.view},ref:"engine"},[!this.clear&&Z([t(z,{attrs:{width:16,height:.4,y:4,active:!0,awake:!0,density:5,linearDamping:2,angularDamping:2},on:{enable:function(t){return e.handleBody=t.body}}})],this.boxes.map((function(n){return t(I,{key:n.id,attrs:{weight:n.w,x:n.x,y:n.y,linearDamping:.5,density:.7},on:{enable:e.injectBox(n.id).bind(e)}})})),[t(T,{attrs:{move:this.move,density:5,linearDamping:10,angularDamping:10,r:180,awake:!0,active:!0},ref:"player"}),t(H,{attrs:{listen:!0,active:!0,awake:!1,density:0,x:0,y:0},on:{collisionEnter:this.handleFloorContact.bind(this)}})])])])},e.prototype.injectBox=function(t){var e=this;return function(b){var n=e.boxes.findIndex((function(b){return b.id===t}));n>=0&&e.$set(e.boxes,n,X(X({},e.boxes[n]),{go:b}))}},e=Y([Object(l.Component)({name:"p-game"})],e)}(l.Vue),nt=(e.default=et,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return K(e,t),Object.defineProperty(e.prototype,"displayHighscore",{get:function(){return~~(this.highscore/100)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayScore",{get:function(){return~~(this.score/100)},enumerable:!0,configurable:!0}),e.prototype.render=function(t){return t("div",f()([{},this.$bem()]),[t("span",f()([{},this.$bem("current")]),[this.displayScore]),this.displayHighscore&&t("span",f()([{},this.$bem("highscore")]),[this.displayHighscore])])},Y([Object(l.Prop)({required:!0}),Q("design:type",Number)],e.prototype,"score",void 0),Y([Object(l.Prop)({required:!0}),Q("design:type",Number)],e.prototype,"highscore",void 0),e=Y([Object(l.Component)({name:"e-scoreboard"})],e)}(y))}}]);